---
title: MySQL客户端与服务器连接过程
date: 2020-03-09 16:52:28
tags:
- MySQL
- 个人博客
categories:
- MySQL
---

​		我们现在已经知道如何启动MySQL的服务器程序，以及如何启动客户端程序来连接到这个服务器程序。运行着的服务器程序和客户端程序本质上都是计算机上的一个进程，所以客户端进程向服务器进程发送请求并得到回复的过程本质上是一个进程间通信的过程！

​		**TCP/IP**是客户端和服务器之间最常用的通信方式。真实环境中，数据库服务器进程和客户端进程可能运行在不同的主机中，它们之间必须通过网络来进行通讯。MySQL采用TCP作为服务器和客户端之间的网络通信协议。在网络环境下，每台计算机都有一个唯一的**IP地址**，如果某个进程有需要采用TCP协议进行网络通信方面的需求，可以向操作系统申请一个**端口号**，这是一个整数值，它的取值范围是**0~65535**。这样在网络中的其他进程就可以通过**IP地址 + 端口号**的方式来与这个进程连接，这样进程之间就可以通过网络进行通信了。

​		MySQL服务器启动的时候会默认申请**3306**端口号，之后就在这个端口上等待客户端进程进行连接。用书面一点的话来说，MySQL服务器会默认监听3306端口。

​		如果3306端口号已经被别的进程占用了或者我们单纯的想自定义该数据库实例监听的端口号，那我们可以在启动服务器程序的命令行里添加-P参数来明确指定一下端口号，比如这样：

```java
mysqld -P3307
```

如果采用windows服务打开MySQL服务器，则需要修改配置文件my.ini中的默认端口号。这样MySQL服务器在启动时就会去监听我们指定的端口号3307。**这里要注意，服务器的端口号和客户端的端口号一定要保持一致，这样才能保证它两能顺利建立TCP/IP连接**

​		如果客户端进程想要使用TCP/IP网络来连接到服务器进程，比如我们在使用mysql来启动客户端程序时，在-h参数后必须跟随IP地址来作为需要连接的服务器进程所在主机的主机名，如果客户端进程和服务器进程在一台计算机中的话，我们可以使用127.0.0.1来代表本机的IP地址。另外，如果服务器进程监听的端口号不是默认的3306，我们也可以在使用mysql启动客户端程序时使用-P参数（大写的P，小写的p是用来指定密码的）来指定需要连接到的端口号。比如我们现在已经在本机启动了服务器进程，监听的端口号为3307，那我们启动客户端程序时可以这样写：

```java
mysql -h127.0.0.1 -uroot -P3307 -p
```

